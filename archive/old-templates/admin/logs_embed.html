u<div class="logs-management-embed">
    <div class="section-header">
        <h2><i class="fas fa-list-alt"></i> ç³»ç»Ÿæ—¥å¿—</h2>
    </div>
    
    <!-- æ˜¾ç¤ºæ¶ˆæ¯ -->
    <div id="log-management-messages"></div>
    
    <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
    <div class="logs-actions-container">
        <div class="action-card">
            <button id="download-logs-btn" class="download-logs-btn">ğŸ“¥ ä¸‹è½½æ‰€æœ‰æ—¥å¿—</button>
        </div>
        
        <div class="action-card danger-zone">
            <button id="delete-all-logs-btn" class="delete-all-logs-btn">åˆ é™¤æ‰€æœ‰æ—¥å¿—</button>
        </div>
    </div>
    
    <!-- æ—¥å¿—è¡¨æ ¼ -->
    <div class="logs-table-container">
        <table class="logs-table">
            <thead>
                <tr>
                    <th>æ—¶é—´</th>
                    <th>ç”¨æˆ·</th>
                    <th>æ“ä½œ</th>
                    <th>èµ„æº</th>
                    <th>è¯¦æƒ…</th>
                    <th>IPåœ°å€</th>
                    <th>ç±»å‹</th>
                    <th>çº§åˆ«</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    <td class="timestamp">{{ log.timestamp }}</td>
                    <td>{{ log.username or '-' }}</td>
                    <td>{{ log.action }}</td>
                    <td>{{ log.resource or '-' }}</td>
                    <td class="log-details">{{ log.details or '-' }}</td>
                    <td>{{ log.ip_address or '-' }}</td>
                    <td>
                        <span class="log-type-badge log-type-{{ log.log_type }}">
                            {{ {
                                'user': 'ç”¨æˆ·æ“ä½œ',
                                'system': 'ç³»ç»Ÿäº‹ä»¶',
                                'security': 'å®‰å…¨äº‹ä»¶'
                            }.get(log.log_type, log.log_type) }}
                        </span>
                    </td>
                    <td>
                        <span class="log-level-badge log-level-{{ log.level }}">
                            {{ {
                                'debug': 'è°ƒè¯•',
                                'info': 'ä¿¡æ¯',
                                'warning': 'è­¦å‘Š',
                                'error': 'é”™è¯¯',
                                'critical': 'ä¸¥é‡'
                            }.get(log.level, log.level) }}
                        </span>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="8">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“‹</div>
                            <h3>æ²¡æœ‰æ‰¾åˆ°æ—¥å¿—è®°å½•</h3>
                            <p>å½“å‰ç­›é€‰æ¡ä»¶ä¸‹æ²¡æœ‰æ—¥å¿—è®°å½•ï¼Œè¯·å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶</p>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    {% if logs|length >= limit %}
    <div class="pagination-info">
        <p>æ˜¾ç¤ºæœ€è¿‘ {{ limit }} æ¡è®°å½•ï¼Œå¦‚éœ€æŸ¥çœ‹æ›´å¤šè¯·å¢åŠ æ˜¾ç¤ºæ¡æ•°</p>
    </div>
    {% endif %}
</div>

<style>
/* æ—¥å¿—ç®¡ç†å†…åµŒæ ·å¼ */
.logs-management-embed {
    padding: 20px;
    background: rgba(26, 26, 46, 0.9);
    border: 1px solid rgba(0, 212, 255, 0.2);
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    position: relative;
}

.section-header {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(0, 212, 255, 0.2);
}

.section-header h2 {
    color: var(--text-primary);
    margin: 0;
    font-size: 24px;
    font-weight: 600;
    background: linear-gradient(135deg, var(--neon-blue) 0%, var(--neon-purple) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: flex;
    align-items: center;
    gap: 12px;
}

.section-header h2 i {
    color: var(--neon-blue);
    text-shadow: 0 0 10px var(--neon-blue);
}

.logs-actions-container {
    display: flex;
    gap: 20px;
    align-items: center;
    justify-content: center;
    margin-bottom: 30px;
}

.action-card {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(0, 212, 255, 0.2);
    text-align: center;
    min-width: 180px;
}

.action-card.danger-zone {
    border: 1px solid rgba(255, 71, 87, 0.3);
    background: rgba(255, 71, 87, 0.1);
}

.download-logs-btn {
    padding: 15px 25px;
    background: linear-gradient(135deg, var(--neon-blue) 0%, var(--neon-purple) 100%);
    color: white;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 600;
    font-size: 16px;
    transition: all var(--transition-normal) ease;
    box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
    height: 50px;
    box-sizing: border-box;
    white-space: nowrap;
}

.download-logs-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 212, 255, 0.5);
}

.download-logs-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: 0 5px 15px rgba(0, 212, 255, 0.2);
}

.delete-all-logs-btn {
    padding: 15px 25px;
    background: linear-gradient(135deg, #ff4757 0%, #d32f2f 100%);
    color: white;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 700;
    font-size: 16px;
    transition: all var(--transition-normal) ease;
    box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
    height: 50px;
    box-sizing: border-box;
    white-space: nowrap;
    position: relative;
}

.delete-all-logs-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(255, 71, 87, 0.6);
}

.delete-all-logs-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: 0 5px 15px rgba(255, 71, 87, 0.2);
}

.delete-all-logs-btn::before {
    content: "âš ï¸";
    margin-right: 5px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.filter-form {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    align-items: flex-end;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.filter-group label {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.filter-form select, .filter-form input {
    padding: 12px 15px;
    border: 1px solid rgba(0, 212, 255, 0.3);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    font-size: 14px;
    transition: all var(--transition-normal) ease;
    min-width: 150px;
    color: var(--text-primary);
    height: 44px;
    box-sizing: border-box;
}

.filter-form select option {
    background-color: var(--deep-space-2);
    color: var(--text-primary);
}

.filter-form select:focus, .filter-form input:focus {
    outline: none;
    border-color: var(--neon-blue);
    box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
}

.filter-form input::placeholder {
    color: var(--text-secondary);
}

.filter-actions {
    display: flex;
    gap: 10px;
    align-items: center;
}

.filter-form button {
    padding: 12px 25px;
    background: linear-gradient(135deg, var(--neon-blue) 0%, var(--neon-purple) 100%);
    color: white;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 500;
    transition: all var(--transition-normal) ease;
    box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
    height: 44px;
    box-sizing: border-box;
}

.filter-form button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 212, 255, 0.5);
}

.logs-table-container {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(0, 212, 255, 0.2);
    margin-bottom: 30px;
}

.logs-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.logs-table th {
    background: rgba(26, 26, 46, 0.9);
    padding: 15px 12px;
    text-align: left;
    font-weight: 600;
    color: var(--neon-blue);
    position: sticky;
    top: 0;
    z-index: 10;
    border-bottom: 2px solid rgba(0, 212, 255, 0.3);
}

.logs-table td {
    padding: 12px;
    border-bottom: 1px solid rgba(0, 212, 255, 0.1);
    vertical-align: top;
    color: var(--text-primary);
}

.logs-table tbody tr {
    transition: background-color 0.2s ease;
}

.logs-table tbody tr:hover {
    background: rgba(0, 212, 255, 0.1);
}

.log-level-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
}

.log-level-debug {
    background: rgba(158, 158, 158, 0.2);
    color: #9E9E9E;
    border: 1px solid rgba(158, 158, 158, 0.3);
}

.log-level-info {
    background: rgba(0, 212, 255, 0.2);
    color: var(--neon-blue);
    border: 1px solid rgba(0, 212, 255, 0.3);
}

.log-level-warning {
    background: rgba(255, 170, 0, 0.2);
    color: var(--warning-color);
    border: 1px solid rgba(255, 170, 0, 0.3);
}

.log-level-error {
    background: rgba(255, 71, 87, 0.2);
    color: #ff4757;
    border: 1px solid rgba(255, 71, 87, 0.3);
    font-weight: 600;  /* å¢åŠ å­—ä½“ç²—ç»† */
    text-shadow: 0 0 2px rgba(255, 71, 87, 0.2);  /* æ·»åŠ è½»å¾®æ–‡å­—é˜´å½± */
}

.log-level-critical {
    background: rgba(255, 71, 87, 0.3);
    color: #ff4757;
    font-weight: bold;
    border: 1px solid rgba(255, 71, 87, 0.5);
    box-shadow: 0 0 5px rgba(255, 71, 87, 0.3);
    text-shadow: 0 0 3px rgba(255, 71, 87, 0.3);  /* å¢å¼ºæ–‡å­—é˜´å½± */
}

.log-type-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 500;
}

.log-type-user {
    background: rgba(0, 212, 255, 0.2);
    color: var(--neon-blue);
    border: 1px solid rgba(0, 212, 255, 0.3);
}

.log-type-system {
    background: rgba(255, 170, 0, 0.2);
    color: var(--warning-color);
    border: 1px solid rgba(255, 170, 0, 0.3);
}

.log-type-security {
    background: rgba(255, 71, 87, 0.2);
    color: #ff4757;
    border: 1px solid rgba(255, 71, 87, 0.3);
    font-weight: 600;  /* å¢åŠ å­—ä½“ç²—ç»† */
    text-shadow: 0 0 2px rgba(255, 71, 87, 0.2);  /* æ·»åŠ è½»å¾®æ–‡å­—é˜´å½± */
}

.log-details {
    max-width: 300px;
    word-wrap: break-word;
    font-size: 13px;
    line-height: 1.4;
}

.timestamp {
    font-family: 'Courier New', monospace;
    font-size: 12px;
    color: var(--text-secondary);
}

.pagination-info {
    text-align: center;
    padding: 20px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(0, 212, 255, 0.2);
    color: var(--text-secondary);
    font-size: 14px;
}

.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-secondary);
}

.empty-state-icon {
    font-size: 48px;
    margin-bottom: 20px;
    opacity: 0.5;
    color: var(--neon-blue);
}

.empty-state h3 {
    margin: 0 0 10px 0;
    color: var(--text-primary);
}

.empty-state p {
    color: var(--text-secondary);
}

/* æ¶ˆæ¯æç¤ºæ ·å¼ */
#log-management-messages {
    margin-bottom: 20px;
}

#log-management-messages .message {
    padding: 16px 20px;
    margin: 15px 0;
    border-radius: 10px;
    font-weight: 600;
    font-size: 16px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.message-success {
    background: linear-gradient(135deg, rgba(0, 255, 127, 0.15), rgba(0, 255, 127, 0.05));
    color: #00ff7f;
    border: 2px solid rgba(0, 255, 127, 0.4);
    box-shadow: 0 0 20px rgba(0, 255, 127, 0.2);
}

.message-success::before {
    content: "âœ“";
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 20px;
    font-weight: bold;
}

.message-success {
    padding-left: 50px;
}

.message-error {
    background: linear-gradient(135deg, rgba(255, 71, 87, 0.15), rgba(255, 71, 87, 0.05));
    color: #ff4757;
    border: 2px solid rgba(255, 71, 87, 0.4);
    box-shadow: 0 0 20px rgba(255, 71, 87, 0.2);
}

.message-error::before {
    content: "âœ—";
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 20px;
    font-weight: bold;
}

.message-error {
    padding-left: 50px;
}

/* é¢å¤–çš„æˆåŠŸé€šçŸ¥æ ·å¼ */
.success-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #00ff7f, #00cc6a);
    color: white;
    padding: 20px 25px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 16px;
    box-shadow: 0 8px 32px rgba(0, 255, 127, 0.3);
    z-index: 10000;
    animation: slideInRight 0.5s ease, slideOutRight 0.5s ease 3.5s;
    min-width: 300px;
    text-align: center;
}

.success-notification::before {
    content: "ğŸ‰";
    margin-right: 10px;
    font-size: 18px;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

@media (max-width: 768px) {
    .logs-management-embed {
        padding: 15px;
    }

    .section-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }

    .logs-actions-container {
        flex-direction: column;
        gap: 15px;
    }

    .action-card {
        width: 100%;
        min-width: unset;
    }

    .download-logs-btn, .delete-all-logs-btn {
        width: 100%;
        justify-content: center;
        font-size: 14px;
    }

    .logs-table-container {
        overflow-x: auto;
    }

    .logs-table {
        min-width: 700px;
    }
}
</style>

<script>
// é‡æ–°è®¾è®¡çš„æ¸…ç†æ—¥å¿—åŠŸèƒ½ - ä½¿ç”¨ç‹¬ç«‹æŒ‰é’®è€Œéè¡¨å•
(function() {
    // ç­‰å¾…DOMå‡†å¤‡å®Œæˆ
    function initFunctions() {
        console.log('åˆå§‹åŒ–æ—¥å¿—ç®¡ç†åŠŸèƒ½');
        
        // åˆå§‹åŒ–ä¸‹è½½æ—¥å¿—åŠŸèƒ½
        initDownloadLogs();
        
        // åˆå§‹åŒ–åˆ é™¤æ‰€æœ‰æ—¥å¿—åŠŸèƒ½
        initDeleteAllLogs();
    }
    
    // ä¸‹è½½æ‰€æœ‰æ—¥å¿—åŠŸèƒ½
    function initDownloadLogs() {
        const downloadBtn = document.getElementById('download-logs-btn');
        
        if (downloadBtn) {
            console.log('æ‰¾åˆ°ä¸‹è½½æŒ‰é’®');
            
            downloadBtn.addEventListener('click', function() {
                console.log('ä¸‹è½½æŒ‰é’®è¢«ç‚¹å‡»');
                
                // æ˜¾ç¤ºä¸‹è½½æç¤º
                downloadBtn.disabled = true;
                downloadBtn.textContent = 'æ­£åœ¨å‡†å¤‡ä¸‹è½½...';
                
                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const link = document.createElement('a');
                link.href = '/admin/logs/download';
                link.download = `logs_${new Date().toISOString().split('T')[0]}.csv`;
                
                // æ·»åŠ åˆ°é¡µé¢å¹¶è§¦å‘ä¸‹è½½
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                showMessage('å¼€å§‹ä¸‹è½½æ—¥å¿—æ–‡ä»¶...', 'success');
                showSuccessNotification('ğŸ“¥ æ—¥å¿—æ–‡ä»¶ä¸‹è½½å·²å¼€å§‹');
                
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                setTimeout(() => {
                    downloadBtn.disabled = false;
                    downloadBtn.textContent = 'ğŸ“¥ ä¸‹è½½æ‰€æœ‰æ—¥å¿—';
                }, 2000);
            });
            
            console.log('ä¸‹è½½æ—¥å¿—äº‹ä»¶ç»‘å®šå®Œæˆ');
        }
    }
    
    // åˆ é™¤æ‰€æœ‰æ—¥å¿—åŠŸèƒ½
    function initDeleteAllLogs() {
        const deleteBtn = document.getElementById('delete-all-logs-btn');
        
        if (deleteBtn) {
            console.log('æ‰¾åˆ°åˆ é™¤æ‰€æœ‰æ—¥å¿—æŒ‰é’®');
            
            deleteBtn.addEventListener('click', function() {
                console.log('åˆ é™¤æ‰€æœ‰æ—¥å¿—æŒ‰é’®è¢«ç‚¹å‡»');
                
                // ç¬¬ä¸€æ¬¡è­¦å‘Šç¡®è®¤
                const firstConfirm = confirm('âš ï¸ å±é™©è­¦å‘Š âš ï¸\n\næ‚¨å³å°†åˆ é™¤æ‰€æœ‰æ—¥å¿—è®°å½•ï¼\n\næ­¤æ“ä½œå°†ï¼š\n1. åˆ é™¤æ‰€æœ‰ç”¨æˆ·æ“ä½œè®°å½•\n2. åˆ é™¤æ‰€æœ‰ç³»ç»Ÿäº‹ä»¶è®°å½•\n3. åˆ é™¤æ‰€æœ‰å®‰å…¨äº‹ä»¶è®°å½•\n4. æ­¤æ“ä½œä¸å¯æ¢å¤ï¼\n\nè¯·ç¡®è®¤æ‚¨çœŸçš„éœ€è¦åˆ é™¤æ‰€æœ‰æ—¥å¿—å—ï¼Ÿ');
                
                if (!firstConfirm) {
                    console.log('ç”¨æˆ·å–æ¶ˆäº†åˆ é™¤æ“ä½œ');
                    return;
                }
                
                // ç¬¬äºŒæ¬¡ç¡®è®¤è¾“å…¥
                const secondConfirm = prompt('âš ï¸ æœ€ç»ˆç¡®è®¤ âš ï¸\n\nä¸ºäº†ç¡®ä¿å®‰å…¨ï¼Œè¯·è¾“å…¥ "ç¡®è®¤åˆ é™¤" æ¥æœ€ç»ˆç¡®è®¤åˆ é™¤æ‰€æœ‰æ—¥å¿—ï¼š');
                
                if (secondConfirm !== 'ç¡®è®¤åˆ é™¤') {
                    if (secondConfirm !== null) {
                        showMessage('ç¡®è®¤æ–‡æœ¬ä¸æ­£ç¡®ï¼Œåˆ é™¤æ“ä½œå·²å–æ¶ˆ', 'error');
                    }
                    return;
                }
                
                console.log('ç”¨æˆ·æœ€ç»ˆç¡®è®¤åˆ é™¤æ‰€æœ‰æ—¥å¿—');
                
                // ç¬¬ä¸‰æ¬¡ç¡®è®¤
                const finalConfirm = confirm('æœ€åç¡®è®¤ï¼šçœŸçš„è¦åˆ é™¤æ‰€æœ‰æ—¥å¿—å—ï¼Ÿ\n\nåˆ é™¤åï¼š\nâ€¢ æ‰€æœ‰å†å²è®°å½•å°†æ°¸ä¹…ä¸¢å¤±\nâ€¢ æ— æ³•æ¢å¤ä»»ä½•åˆ é™¤çš„æ•°æ®\nâ€¢ å¯èƒ½å½±å“ç³»ç»Ÿçš„å®¡è®¡è¿½è¸ª\n\nè¯·å†æ¬¡ç¡®è®¤ï¼');
                
                if (!finalConfirm) {
                    console.log('ç”¨æˆ·æœ€ç»ˆå–æ¶ˆäº†åˆ é™¤æ“ä½œ');
                    return;
                }
                
                console.log('ç”¨æˆ·æœ€ç»ˆç¡®è®¤ï¼Œå¼€å§‹å‘é€åˆ é™¤è¯·æ±‚');
                
                // ç¦ç”¨æŒ‰é’®å¹¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                deleteBtn.disabled = true;
                deleteBtn.textContent = 'åˆ é™¤ä¸­...';
                deleteBtn.style.background = 'linear-gradient(135deg, #cc0000 0%, #990000 100%)';
                
                // å‘é€åˆ é™¤è¯·æ±‚
                fetch('/admin/logs/delete-all', {
                    method: 'POST',
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                .then(response => {
                    console.log('æ”¶åˆ°åˆ é™¤å“åº”:', response.status);
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('åˆ é™¤ç»“æœ:', data);
                    if (data.success) {
                        // æ˜¾ç¤ºé¡µé¢å†…æ¶ˆæ¯
                        showMessage(data.message, 'success');
                        // æ˜¾ç¤ºç‰¹åˆ«é†’ç›®çš„æˆåŠŸé€šçŸ¥
                        showSuccessNotification(`ğŸ—‘ï¸ ${data.message}`);
                        
                        // 2ç§’ååˆ·æ–°é¡µé¢
                        setTimeout(() => {
                            location.reload();
                        }, 2000);
                    } else {
                        // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
                        showMessage(data.message || 'åˆ é™¤å¤±è´¥', 'error');
                    }
                })
                .catch(error => {
                    console.error('åˆ é™¤é”™è¯¯:', error);
                    let errorMessage = 'åˆ é™¤å¤±è´¥: ';
                    
                    if (error.message.includes('fetch')) {
                        errorMessage += 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
                    } else if (error.message.includes('HTTP')) {
                        errorMessage += 'æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•';
                    } else {
                        errorMessage += error.message;
                    }
                    
                    showMessage(errorMessage, 'error');
                })
                .finally(() => {
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    deleteBtn.disabled = false;
                    deleteBtn.textContent = 'ğŸ—‘ï¸ åˆ é™¤æ‰€æœ‰æ—¥å¿—';
                    deleteBtn.style.background = 'linear-gradient(135deg, #ff4757 0%, #d32f2f 100%)';
                    console.log('åˆ é™¤æ“ä½œå®Œæˆ');
                });
            });
            
            console.log('åˆ é™¤æ‰€æœ‰æ—¥å¿—äº‹ä»¶ç»‘å®šå®Œæˆ');
        }
    }
    
    
    
    // æ˜¾ç¤ºæ¶ˆæ¯å‡½æ•°
    function showMessage(message, type = 'success') {
        const messagesContainer = document.getElementById('log-management-messages');
        if (!messagesContainer) return;
        
        messagesContainer.innerHTML = '';
        
        const messageDiv = document.createElement('div');
        messageDiv.className = `message message-${type}`;
        messageDiv.textContent = message;
        
        messagesContainer.appendChild(messageDiv);
        
        // 3ç§’åéšè—æ¶ˆæ¯
        setTimeout(() => {
            messageDiv.style.opacity = '0';
            messageDiv.style.transform = 'translateY(-10px)';
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.parentNode.removeChild(messageDiv);
                }
            }, 300);
        }, 3000);
    }
    
    // æ˜¾ç¤ºé†’ç›®çš„æˆåŠŸé€šçŸ¥
    function showSuccessNotification(message) {
        // ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ—§é€šçŸ¥
        const existingNotification = document.querySelector('.success-notification');
        if (existingNotification) {
            existingNotification.remove();
        }
        
        const notification = document.createElement('div');
        notification.className = 'success-notification';
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        // 4ç§’åè‡ªåŠ¨ç§»é™¤é€šçŸ¥
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 4000);
    }
    
    // ç«‹å³å¼€å§‹åˆå§‹åŒ–
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initFunctions);
    } else {
        initFunctions();
    }
})();
</script>